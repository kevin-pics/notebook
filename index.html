<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cornell Notes - 笔记索引</title>
    <link rel="stylesheet" href="css/index.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/air-datepicker@3.5.3/air-datepicker.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/air-datepicker@3.5.3/air-datepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/air-datepicker@3.5.3/locale/zh.js"></script>
  </head>
  <body>
    <div id="app">
      <div class="page-wrapper">
        <div class="content-container">
          <!-- Header -->
          <header class="page-header">
            <h1>Cornell Notes</h1>
            <p>Kevin's Cornell Notes Collection</p>
          </header>

          <!-- Filter and Sort Controls -->
          <div class="filter-controls">
            <div class="date-filter">
              <div class="date-input-wrapper">
                <input
                  ref="datePicker"
                  type="text"
                  placeholder="Select Date"
                  class="date-input calendar-input"
                  readonly
                />
                <button
                  @click="clearDateFilter"
                  class="btn-clear-inline"
                  v-if="selectedDate"
                >
                  ✕
                </button>
              </div>
            </div>
            <div class="sort-control">
              <button @click="toggleSortOrder" class="btn-sort">
                <span>Sort by Date</span>
                <span class="sort-icon"
                  >{{ sortOrder === 'desc' ? '↓' : '↑' }}</span
                >
              </button>
            </div>
          </div>

          <!-- Filter Info -->
          <div class="filter-info" v-if="selectedDate">
            <span>
              {{ filteredAndSortedNotes.length }} {{
              filteredAndSortedNotes.length === 1 ? 'note' : 'notes' }} on {{
              selectedDate }}
            </span>
          </div>
          <div class="filter-info" v-else>
            <span>
              {{ notes.length }} {{ notes.length === 1 ? 'note' : 'notes' }} in
              total
            </span>
          </div>

          <!-- Notes List -->
          <main class="notes-list">
            <ul class="note-items">
              <li
                v-for="note in filteredAndSortedNotes"
                :key="note.id"
                class="note-item-row"
              >
                <a :href="note.url" class="note-link">
                  <span class="note-title">{{ note.title }}</span>
                  <div class="note-meta-row">
                    <span class="note-date">
                      <span class="date-full">{{ note.date }}</span>
                      <span class="date-short">{{ note.dateOnly }}</span>
                    </span>
                    <span class="note-tags">
                      <span
                        v-for="(tag, index) in note.tags"
                        :key="tag"
                        v-show="index < 3"
                        class="tag"
                      >
                        {{ tag }}
                      </span>
                    </span>
                  </div>
                </a>
              </li>
            </ul>
          </main>

          <!-- Footer -->
          <footer class="page-footer">
            <div class="summary-card">
              <p><strong>About Cornell Notes</strong></p>
              <p style="color: var(--color-slate-600); line-height: 1.6">
                The Cornell Note-taking System is a systematic note-taking
                method developed by Professor Walter Pauk of Cornell University.
                This site showcases learning notes organized using the Cornell
                method, covering various fields including technology, business,
                and language learning.
              </p>
              <p class="note">
                Total {{ notes.length }} notes | Last updated: {{ lastUpdate }}
              </p>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <script>
      const { createApp } = Vue;

      createApp({
        data() {
          return {
            notes: [
              {
                id: 1,
                title: "信息产业的规律性",
                url: "cornell/cornell-notes-it-industry-laws.html",
                tags: ["IT行业", "商业定律", "浪潮之巅"],
                date: "2025-10-29 17:58",
                dateOnly: "2025-10-29",
              },
              {
                id: 2,
                title: "塔拉滩光伏发电园区",
                url: "cornell/塔拉滩光伏发电园区.html",
                tags: ["能源", "光伏", "青海"],
                date: "2025-10-29 16:49",
                dateOnly: "2025-10-29",
              },
              {
                id: 3,
                title: "如何用英语思考",
                url: "cornell/如何用英语思考_Cornell_Notes-.html",
                tags: ["语言学习", "英语", "学习方法"],
                date: "2025-10-29 16:56",
                dateOnly: "2025-10-29",
              },
              {
                id: 4,
                title: "苹果公司发展史",
                url: "cornell/apple-history-cornell-notes.html",
                tags: ["科技企业", "苹果", "商业历史", "浪潮之巅"],
                date: "2025-10-29 18:30",
                dateOnly: "2025-10-29",
              },
              {
                id: 5,
                title: "IBM：技术浪潮中的常青树",
                url: "cornell/ibm-cornell-notes.html",
                tags: ["科技企业", "IBM", "商业历史", "浪潮之巅"],
                date: "2025-10-29 19:15",
                dateOnly: "2025-10-29",
              },
              {
                id: 6,
                title: "GitHub 2025 Octoverse 报告",
                url: "cornell/github-octoverse-2025-cornell-notes.html",
                tags: ["GitHub", "开源", "开发者", "技术趋势"],
                date: "2025-10-29 19:45",
                dateOnly: "2025-10-29",
              },
              {
                id: 7,
                title: "美元如何控制世界",
                url: "cornell/美元如何控制世界_Cornell笔记.html",
                tags: ["金融", "美元体系", "国际政治", "经济学"],
                date: "2025-10-30 00:00",
                dateOnly: "2025-10-30",
              },
            ],
            lastUpdate: "2025-10-30",
            sortOrder: "desc", // 'desc' for descending, 'asc' for ascending
            selectedDate: "",
            datepickerInstance: null,
          };
        },
        computed: {
          filteredAndSortedNotes() {
            let result = [...this.notes];

            // Apply date filter
            if (this.selectedDate) {
              result = result.filter((note) => {
                return note.dateOnly === this.selectedDate;
              });
            }

            // Apply sorting
            result.sort((a, b) => {
              if (this.sortOrder === "desc") {
                return b.date.localeCompare(a.date);
              } else {
                return a.date.localeCompare(b.date);
              }
            });

            return result;
          },
        },
        methods: {
          toggleSortOrder() {
            this.sortOrder = this.sortOrder === "desc" ? "asc" : "desc";
          },
          clearDateFilter() {
            this.selectedDate = "";
            if (this.datepickerInstance) {
              this.datepickerInstance.clear();
            }
          },
          initDatepicker() {
            this.$nextTick(() => {
              const input = this.$refs.datePicker;
              if (!input) return;

              this.datepickerInstance = new AirDatepicker(input, {
                locale: {
                  days: [
                    "周日",
                    "周一",
                    "周二",
                    "周三",
                    "周四",
                    "周五",
                    "周六",
                  ],
                  daysShort: ["日", "一", "二", "三", "四", "五", "六"],
                  daysMin: ["日", "一", "二", "三", "四", "五", "六"],
                  months: [
                    "一月",
                    "二月",
                    "三月",
                    "四月",
                    "五月",
                    "六月",
                    "七月",
                    "八月",
                    "九月",
                    "十月",
                    "十一月",
                    "十二月",
                  ],
                  monthsShort: [
                    "1月",
                    "2月",
                    "3月",
                    "4月",
                    "5月",
                    "6月",
                    "7月",
                    "8月",
                    "9月",
                    "10月",
                    "11月",
                    "12月",
                  ],
                  today: "今天",
                  clear: "清除",
                  dateFormat: "yyyy-MM-dd",
                  timeFormat: "HH:mm",
                  firstDay: 1,
                },
                dateFormat: "yyyy-MM-dd",
                position: "bottom left",
                autoClose: true,
                onSelect: ({ date, formattedDate }) => {
                  this.selectedDate = formattedDate;
                },
              });
            });
          },
        },
        mounted() {
          this.initDatepicker();
        },
        beforeUnmount() {
          if (this.datepickerInstance) {
            this.datepickerInstance.destroy();
          }
        },
      }).mount("#app");
    </script>
  </body>
</html>
